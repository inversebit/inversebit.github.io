<!DOCTYPE html>
<html lang="en">
<head>

    <title>Kikimora</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        :root {
            --button-bg-color: #ffffff;
            --button-text-color: var(--color-darkgrey);
        }
    </style>

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=9c4eb4f91f" />

    <meta name="description" content="An ESP8266-based systems monitoring device" />
    <link rel="icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://inversebit.org/kikimora/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://inversebit.org/kikimora/amp/" />
    
    <meta property="og:site_name" content="Inversebit" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Kikimora" />
    <meta property="og:description" content="An ESP8266-based systems monitoring device" />
    <meta property="og:url" content="https://inversebit.org/kikimora/" />
    <meta property="article:published_time" content="2017-02-01T00:00:00.000Z" />
    <meta property="article:modified_time" content="2022-01-16T11:37:03.000Z" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Kikimora" />
    <meta name="twitter:description" content="An ESP8266-based systems monitoring device" />
    <meta name="twitter:url" content="https://inversebit.org/kikimora/" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Inversebit" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Inversebit",
        "url": "https://inversebit.org/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://inversebit.org/favicon.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Inversebit",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/07ae5d8bdbd343cdf659320e00b606c4?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://inversebit.org/author/inversebit/",
        "sameAs": []
    },
    "headline": "Kikimora",
    "url": "https://inversebit.org/kikimora/",
    "datePublished": "2017-02-01T00:00:00.000Z",
    "dateModified": "2022-01-16T11:37:03.000Z",
    "description": "An ESP8266-based systems monitoring device",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://inversebit.org/"
    }
}
    </script>

    <meta name="generator" content="Ghost 4.32" />
    <link rel="alternate" type="application/rss+xml" title="Inversebit" href="https://inversebit.org/rss/" />
    
    <script defer src="/public/cards.min.js?v=9c4eb4f91f"></script>
    <link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=9c4eb4f91f">
    <style>
    a.gh-head-button {
        display: none;
    }
    .footer-cta {
        display: none;
    }
    .gh-burger {
        /*display: none;*/
    }
    .site-footer{
        padding-bottom: 2em;
    }
    img.kg-image{
        border-radius: 5px;
    }
    div.site-description{
        margin-top: 2em;
    }
    div.site-description a{
        color: var(--ghost-accent-color);
		text-decoration: underline;
    }
    hr.description-separator{
        margin: 2.5em 0 2.0em;
    }
</style><style>:root {--ghost-accent-color: #ff7800;}</style>

</head>
<body class="post-template">
<div class="viewport">

    <header id="gh-head" class="gh-head">
        <nav class="gh-head-inner inner gh-container">

            <div class="gh-head-brand">
                <a class="gh-head-logo" href="https://inversebit.org">
                        Inversebit
                </a>
                <a class="gh-burger" role="button">
                    <div class="gh-burger-box">
                        <div class="gh-burger-inner"></div>
                    </div>
                </a>
            </div>
            <div class="gh-head-menu">
                
            </div>
            <div class="gh-head-actions">
                <div class="gh-social">
                </div>

                    <a class="gh-head-button" href="#/portal/signup" data-portal="signup">Subscribe</a>
            </div>
        </nav>
    </header>

    <div class="site-content">
        



<main id="site-main" class="site-main">
    <article class="article post no-image ">

        <header class="article-header gh-canvas">


            <h1 class="article-title">Kikimora</h1>

            <p class="article-excerpt">An ESP8266-based systems monitoring device</p>

            <div class="article-byline">
                <section class="article-byline-content">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <a href="/author/inversebit/" class="author-avatar">
                                <img class="author-profile-image" src="//www.gravatar.com/avatar/07ae5d8bdbd343cdf659320e00b606c4?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Inversebit" />
                            </a>
                        </li>
                    </ul>
                    <div class="article-byline-meta">
                        <h4 class="author-name"><a href="/author/inversebit/">Inversebit</a></h4>
                        <div class="byline-meta-content">
                            <time class="byline-meta-date" datetime="2017-02-01">Feb 1, 2017</time>
                            <span class="byline-reading-time"><span class="bull">&bull;</span> 5 min read</span>
                        </div>
                    </div>
                </section>
            </div>

        </header>

        <section class="gh-content gh-canvas">
            <p><a href="https://github.com/Inversebit/kikimora">Repo Link</a></p><p>Kikimora was born form an idea given to me by colleague at work. The idea was to create a simple device, which with the aid of two LEDs would indicate if a computer system is up or down. The device could be set on top of any computer screen in order to make it easy to check out.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/kikimora_small.png" class="kg-image" alt="The kikimora device" loading="lazy" width="274" height="200"><figcaption>The kikimora device</figcaption></figure><p>I specified further what I would try to accomplish and thought of the following: The device would be configured to ping or somehow GET a webpage every X seconds. If the page responded with a 200 HTTP code, let’s light the green LED, any other message: red LED.</p><p>After that I added some requirements to the device: to make it self-contained, as simple as possible to use, and small (in that order). So, I started the hunt for an arduino-like platform with embedded WiFi capabilities, and landed on the <a href="https://en.wikipedia.org/wiki/ESP8266">ESP8266</a> module family. I bought an ESP8266-01 and ESP8266-12E, because they are dirty cheap. I ended up using the 01, the reason is simple, I liked the restrictions imposed upon me by using such a “simple” device. It only offered me a WiFi link and 2 GPIO ports (though I’m sure someone has already invented some kind of hack to use the RX/TX ports for GPIO).</p><h3 id="programming">PROGRAMMING</h3><p>After a long afternoon programming the ESP8266 I managed to cram a program which did the following:</p><ul><li>Setup a Wifi connection to a hardcoded network</li><li>Setup an internal timer (based on the OSs functionality, and not some cheesy software hack)</li><li>Host a configuration page to setup the page to monitor</li><li>Write some code to light a LED or the other based on the target website’s status</li></ul><p>I took into account the hardware limitations and avoided to work too long in the device’s main (and only?) thread.</p><p>The code is available in the project’s repo, linked at the start of this article.</p><h3 id="electronics">ELECTRONICS</h3><p>The electronics were pretty basic, in the end it’s just a microcontroller and two LEDs. In order to pursue the “simplicity” aspect of the project I wanted to supply the juice via an USB port, like most handheld devices around us. Two problems arise: 1. A micro-usb port is probably fragile + difficult to solder in a perfboard. 2. USB provides 5V… and the ESP8266 needs 3.3V.</p><p>The first one I solved using and old-school USB-A female port. To solve the second one I wanted to get away with a voltage divider, but due to the laws of electronics it wound up to be a difficult task, so I summoned all my patience, order a bunch of voltage regulators on ebay and put the project on hold for a week. When they arrived everything worked perfectly.</p><p>The schematic for the circuit is as follows:<br></p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/schema.png" class="kg-image" alt="Electrical diagram of kikimora" loading="lazy" width="865" height="404" srcset="https://inversebit.org/content/images/size/w600/2022/01/schema.png 600w, https://inversebit.org/content/images/2022/01/schema.png 865w" sizes="(min-width: 720px) 720px"><figcaption>Electrical diagram of kikimora</figcaption></figure><p>First, sorry for putting an ESP8266 which is the wrong module in the schematic, but I didn’t find the 01… Secondly, there is no much mystery to it. The resistor after the LEDs should avoid the build up of “infinite” current, and that’s all.</p><p>The first prototypes I tried out in the proverbial protoboard. The <em>definitive</em> circuit was build on a perfboard. Pretty badly. I should get a better soldering iron and something to hold the board and components while I solder them. Sorry for the terrible craftsmanship you’ll see in the photos.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/000.JPG" class="kg-image" alt="Kikimora internals #1" loading="lazy" width="1000" height="664" srcset="https://inversebit.org/content/images/size/w600/2022/01/000.JPG 600w, https://inversebit.org/content/images/2022/01/000.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Kikimora internals #1</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/001.JPG" class="kg-image" alt="Kikimora internals #2" loading="lazy" width="1000" height="593" srcset="https://inversebit.org/content/images/size/w600/2022/01/001.JPG 600w, https://inversebit.org/content/images/2022/01/001.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Kikimora internals #2</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/002.JPG" class="kg-image" alt="Kikimora internals backside" loading="lazy" width="1000" height="544" srcset="https://inversebit.org/content/images/size/w600/2022/01/002.JPG 600w, https://inversebit.org/content/images/2022/01/002.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Kikimora internals backside</figcaption></figure><p>There are two more things I would like to talk about: First the operating voltage. As you have probably notices there is a voltage regulator which reduces the USB’s 5V to 3.3V for the ESP8266. The bad thing about this is that the LEDs will be slightly underpowered, emitting only a very faint light.</p><p>Secondly, the ESP8266 is mounted on some pins and not directly soldered to the perfboard. This is so in order to make it easier to reprogram the microchip in the future without much hassle. The downside: The high occupied by the whole ensemble, which is quite a lot for a device of this size.</p><h3 id="exterior">EXTERIOR</h3><p>The exterior is a simple parallelepiped or a rectangle with volume. I made it so that I could be easily opened in the middle and accommodate all the components (mainly regarding height).</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/005.JPG" class="kg-image" alt="Kikimora 3D printed case" loading="lazy" width="1000" height="650" srcset="https://inversebit.org/content/images/size/w600/2022/01/005.JPG 600w, https://inversebit.org/content/images/2022/01/005.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Kikimora 3D printed case</figcaption></figure><p>The bottom part of the case takes the board. The perfboard is mounted on two screws and the edge of the case, leaving a bit of space beneath for some cables and solder blobs. The top was build with the height constraints in mind. There are two holes for the LEDs to go through, and a notch for the upper half of the USB port.</p><p>I designed the case in <a href="https://www.freecadweb.org/">FreeCAD</a> (in a pretty unorthodox way, regarding good practices). The top half was a bit of trial and error thing, it was difficult to define the right height for the piece and LED hole diameter, taking into account my printer’s tolerances and accuracy error.</p><p>I exported the models to STL meshes and converted them to gcode using <a href="https://ultimaker.com/en/products/cura-software">Cura 15</a>. Then I printed the case in my <em>Prusa i3</em>-model 3D-printer in PLA plastic.</p><h3 id="putting-it-together">PUTTING IT TOGETHER</h3><p>To finish it of I glued the LEDs to the perfboard with some silicone sealant and decided to bend the voltage regulator beneath the ESP8266 board in order to avoid it hitting the top of the case. As it doesn’t heat up too much I think it won’t cause a problem there.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/003.JPG" class="kg-image" alt="Kikimora internals, fully assembled" loading="lazy" width="1000" height="513" srcset="https://inversebit.org/content/images/size/w600/2022/01/003.JPG 600w, https://inversebit.org/content/images/2022/01/003.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Kikimora internals, fully assembled</figcaption></figure><p>You've seen the complete build on the beginning of this article:</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://inversebit.org/content/images/2022/01/004.JPG" class="kg-image" alt="Outside view of the kikimora device, fully assembled" loading="lazy" width="1000" height="730" srcset="https://inversebit.org/content/images/size/w600/2022/01/004.JPG 600w, https://inversebit.org/content/images/2022/01/004.JPG 1000w" sizes="(min-width: 720px) 720px"><figcaption>Outside view of the kikimora device, fully assembled</figcaption></figure><p>The ESP8266’s code, CAD and STL models are all open source. You can find a link to the <a href="https://github.com/Inversebit/kikimora">repo</a>.</p>
        </section>


    </article>
</main>



<aside class="read-more-wrap">
    <div class="read-more inner">


                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="/utsund-revisited-integrating-with-esphome/">
            <header class="post-card-header">
                <h2 class="post-card-title">Integrating with ESPHome and Home assistant - Utsund revisited</h2>
            </header>
            <div class="post-card-excerpt">
                <p>Could my smart Utsund string light get better?</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="/author/inversebit/" class="static-avatar">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/07ae5d8bdbd343cdf659320e00b606c4?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Inversebit" loading="lazy" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="/author/inversebit/">Inversebit</a></span>
                <span class="post-card-byline-date"><time datetime="2022-01-01">Jan 1, 2022</time> <span class="bull">&bull;</span> 2 min read</span>
            </div>
        </footer>

    </div>

</article>
                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="/smartifying-a-dumb-vibrator/">
            <header class="post-card-header">
                <h2 class="post-card-title">Smartifying a dumb vibrator</h2>
            </header>
            <div class="post-card-excerpt">
                <p>If a device doesn't meet your needs improve it!</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="/author/inversebit/" class="static-avatar">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/07ae5d8bdbd343cdf659320e00b606c4?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Inversebit" loading="lazy" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="/author/inversebit/">Inversebit</a></span>
                <span class="post-card-byline-date"><time datetime="2022-01-01">Jan 1, 2022</time> <span class="bull">&bull;</span> 6 min read</span>
            </div>
        </footer>

    </div>

</article>
                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="/my-katana-60-mechanical-keyboard/">
            <header class="post-card-header">
                <h2 class="post-card-title">My Katana 60 mechanical keyboard</h2>
            </header>
            <div class="post-card-excerpt">
                <p>An account of my own keeb build</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="/author/inversebit/" class="static-avatar">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/07ae5d8bdbd343cdf659320e00b606c4?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Inversebit" loading="lazy" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="/author/inversebit/">Inversebit</a></span>
                <span class="post-card-byline-date"><time datetime="2021-01-01">Jan 1, 2021</time> <span class="bull">&bull;</span> 6 min read</span>
            </div>
        </footer>

    </div>

</article>

    </div>
</aside>


    </div>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="https://inversebit.org">Inversebit</a> &copy; 2022</section>
            <nav class="site-footer-nav">
                
            </nav>
            <div><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>


<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="/assets/built/casper.js?v=9c4eb4f91f"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>



</body>
</html>
